# ЁЯОм р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М

## р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕бр╕╡

### 1. тЬЕ р╣Бр╕кр╕Фр╕Зр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╣Бр╕Ър╕Ъ Animation
- р╕гр╕нр╕Зр╕гр╕▒р╕Ъ APNG (Animated PNG)
- р╣Гр╕Кр╣Й URL: `sticker_animation@2x.png`
- р╕Вр╕вр╕▒р╕Ър╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Ф

### 2. тЬЕ р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕╡р╣Ар╕Юр╕ер╕вр╣Мр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ
- р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣Ир╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
- р╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╕Ир╕░р╣Ар╕ер╣Ир╕Щр╣Гр╕лр╕бр╣Ир╕Хр╕▒р╣Йр╕Зр╣Бр╕Хр╣Ир╕Хр╣Йр╕Щ
- р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╣Йр╕З ANIMATION р╣Бр╕ер╕░ STATIC stickers

### 3. тЬЕ Hover Effects
- **Hover:** р╕Вр╕вр╕▓р╕вр╕Вр╕Щр╕▓р╕Ф 110% (`scale-110`)
- **Active (р╕Др╕ер╕┤р╕Б):** р╕вр╣Ир╕нр╕Вр╕Щр╕▓р╕Ф 95% (`scale-95`)
- **Cursor:** р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ pointer р╣Ар╕Юр╕╖р╣Ир╕нр╕Ър╕нр╕Бр╕зр╣Ир╕▓р╕Др╕ер╕┤р╕Бр╣Др╕Фр╣Й

### 4. тЬЕ Fallback URLs
- р╕ер╕нр╕З Animation URL р╕Бр╣Ир╕нр╕Щ
- р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╣Др╕Фр╣Й р╕ер╕нр╕З Static URL
- р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Бр╕кр╕Фр╕З emoji ЁЯШК

---

## р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕гр╕╡р╣Ар╕Юр╕ер╕вр╣Мр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ:
```
1. р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣Ир╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
2. р╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╕Ир╕░р╣Ар╕ер╣Ир╕Щр╣Гр╕лр╕бр╣Ир╕Чр╕▒р╕Щр╕Чр╕╡
```

### Hover Effect:
```
1. р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Ар╕бр╕▓р╕кр╣Мр╣Др╕Ыр╕Чр╕╡р╣Ир╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
2. р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Ир╕░р╕Вр╕вр╕▓р╕вр╕Вр╕Щр╕▓р╕Фр╣Ар╕ер╣Зр╕Бр╕Щр╣Йр╕нр╕в
3. Cursor р╕Ир╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ pointer
```

---

## Technical Details

### р╕Бр╕▓р╕гр╕гр╕╡р╣Ар╕Юр╕ер╕вр╣Мр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ

**р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ:**
```typescript
onDoubleClick={(e) => {
  const target = e.currentTarget
  const originalSrc = target.src
  
  // 1. р╕ер╣Йр╕▓р╕З src р╣Гр╕лр╣Йр╣Ар╕Ыр╣Зр╕Щр╕Др╣Ир╕▓р╕зр╣Ир╕▓р╕З
  target.src = ''
  
  // 2. р╕гр╕н 10ms р╣Бр╕ер╣Йр╕зр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣Ир╕Юр╕гр╣Йр╕нр╕б timestamp
  setTimeout(() => {
    target.src = originalSrc + '?t=' + Date.now()
  }, 10)
}
```

**р╕Чр╕│р╣Др╕бр╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й timestamp?**
- Browser cache р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю APNG
- р╣Ар╕Юр╕┤р╣Ир╕б `?t=timestamp` р╣Ар╕Юр╕╖р╣Ир╕нр╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Гр╕лр╣Йр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣И
- р╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╕Ир╕░р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Гр╕лр╕бр╣Ир╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕З

### CSS Classes

```css
/* Sticker Image */
className="w-32 h-32 object-contain cursor-pointer transition-transform hover:scale-110 active:scale-95"

/* Breakdown: */
w-32 h-32           тЖТ р╕Вр╕Щр╕▓р╕Ф 128x128px
object-contain      тЖТ р╕гр╕▒р╕Бр╕йр╕▓р╕кр╕▒р╕Фр╕кр╣Ир╕зр╕Щ
cursor-pointer      тЖТ р╣Бр╕кр╕Фр╕З pointer cursor
transition-transform тЖТ smooth animation
hover:scale-110     тЖТ р╕Вр╕вр╕▓р╕в 110% р╣Ар╕бр╕╖р╣Ир╕н hover
active:scale-95     тЖТ р╕вр╣Ир╕н 95% р╣Ар╕бр╕╖р╣Ир╕нр╕Др╕ер╕┤р╕Б
```

---

## р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### Animation Sticker
```typescript
// URL р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й
https://stickershop.line-scdn.net/stickershop/v1/sticker/52002759/iPhone/sticker_animation@2x.png

// Resource Type
sticker_resource_type: 'ANIMATION'

// Behavior
- р╣Вр╕лр╕ер╕Фр╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б: р╣Ар╕ер╣Ир╕Щр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ 1 р╕гр╕нр╕Ъ
- Hover: р╕Вр╕вр╕▓р╕вр╕Вр╕Щр╕▓р╕Ф
- р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Б: р╣Ар╕ер╣Ир╕Щр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И
```

### Static Sticker
```typescript
// URL р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й
https://stickershop.line-scdn.net/stickershop/v1/sticker/123456/android/sticker.png

// Resource Type
sticker_resource_type: 'STATIC'

// Behavior
- р╣Вр╕лр╕ер╕Фр╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б: р╣Бр╕кр╕Фр╕Зр╕гр╕╣р╕Ыр╕Др╕Зр╕Чр╕╡р╣И
- Hover: р╕Вр╕вр╕▓р╕вр╕Вр╕Щр╕▓р╕Ф
- р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Б: р╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╣Гр╕лр╕бр╣И (р╣Др╕бр╣Ир╕бр╕╡р╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╣Ар╕Юр╕┤р╣Ир╕б)
```

---

## Browser Support

### APNG Support
| Browser | Version | Support |
|---------|---------|---------|
| Chrome | 59+ | тЬЕ |
| Firefox | 3+ | тЬЕ |
| Safari | 8+ | тЬЕ |
| Edge | 79+ | тЬЕ |
| Opera | 46+ | тЬЕ |

### CSS Transforms
| Browser | Version | Support |
|---------|---------|---------|
| All Modern | Latest | тЬЕ |

---

## Troubleshooting

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╣Бр╕ер╣Йр╕зр╣Др╕бр╣Ир╣Ар╕ер╣Ир╕Щр╣Гр╕лр╕бр╣И

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
1. р╣Ар╕Ыр╕┤р╕Ф Browser DevTools > Network tab
2. р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ request р╣Гр╕лр╕бр╣Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣И
4. р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡ р╕ер╕нр╕З clear cache

### р╕Ыр╕▒р╕Нр╕лр╕▓: Hover effect р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ CSS classes
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Tailwind CSS р╣Вр╕лр╕ер╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
3. р╕ер╕нр╕Зр╣Гр╕Кр╣Й inline styles:
   ```typescript
   style={{ 
     transition: 'transform 0.2s',
     cursor: 'pointer'
   }}
   onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.1)'}
   onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
   ```

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╣Др╕бр╣Ир╕Вр╕вр╕▒р╕Ъ

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ `sticker_resource_type` р╣Гр╕Щ database
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ URL р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й
3. р╕ер╕нр╕З fallback URLs
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ browser р╕гр╕нр╕Зр╕гр╕▒р╕Ъ APNG

---

## Future Enhancements

### р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕нр╕▓р╕Ир╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х:

1. **ЁЯФК Sound Stickers**
   - р╣Ар╕ер╣Ир╕Щр╣Ар╕кр╕╡р╕вр╕Зр╣Ар╕бр╕╖р╣Ир╕нр╕Др╕ер╕┤р╕Б
   - р╕гр╕нр╕Зр╕гр╕▒р╕Ъ `SOUND` р╣Бр╕ер╕░ `ANIMATION_SOUND`

2. **ЁЯТе Popup Stickers**
   - р╣Бр╕кр╕Фр╕Зр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣М popup
   - р╕гр╕нр╕Зр╕гр╕▒р╕Ъ `POPUP` р╣Бр╕ер╕░ `POPUP_SOUND`

3. **ЁЯУК Sticker Analytics**
   - р╕Щр╕▒р╕Ър╕Ир╕│р╕Щр╕зр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Б
   - р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕вр╕нр╕Фр╕Щр╕┤р╕вр╕б

4. **ЁЯОи Custom Effects**
   - р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╕Юр╕┤р╣Ар╕ир╕й (shake, bounce, rotate)
   - р╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╣Др╕Фр╣Й

5. **тМия╕П Keyboard Shortcuts**
   - р╕Бр╕Ф Space р╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕╡р╣Ар╕Юр╕ер╕вр╣М
   - р╕Бр╕Ф R р╣Ар╕Юр╕╖р╣Ир╕н replay

---

## Code Reference

### р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З:
- `components/chat/MessageBubble.tsx` - Component р╕лр╕ер╕▒р╕Б
- `lib/useRealtimeChat.ts` - Type definitions

### Key Functions:
```typescript
// р╕гр╕╡р╣Ар╕Юр╕ер╕вр╣Мр╣Бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ
onDoubleClick={(e) => {
  const target = e.currentTarget
  const originalSrc = target.src
  target.src = ''
  setTimeout(() => {
    target.src = originalSrc + '?t=' + Date.now()
  }, 10)
}}

// Fallback chain
onError={(e) => {
  // Try different URLs
}}
```

---

## р╕кр╕гр╕╕р╕Ы

### р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕бр╕╡:
- тЬЕ р╣Бр╕кр╕Фр╕З Animation stickers
- тЬЕ р╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕╡р╣Ар╕Юр╕ер╕вр╣М
- тЬЕ Hover effects
- тЬЕ Fallback URLs
- тЬЕ Responsive design

### UX Improvements:
- ЁЯОп Cursor pointer р╕Ър╕нр╕Бр╕зр╣Ир╕▓р╕Др╕ер╕┤р╕Бр╣Др╕Фр╣Й
- ЁЯОи Smooth transitions
- ЁЯТб Visual feedback (scale effects)
- ЁЯФД Instant replay

---

**ЁЯОЙ р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕з! р╕ер╕нр╕Зр╕Фр╕▒р╕Ър╣Ар╕Ър╕┤р╕ер╕Др╕ер╕┤р╕Бр╕Фр╕╣р╕кр╕┤** ЁЯШК
